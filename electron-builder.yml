appId: com.evb.viewer
productName: EVB Viewer
copyright: Copyright Â© 2026 Eugene Barsky

asar: true
asarUnpack:
  - nuxt-output/**/*
  - dist-electron/ocr-worker.js
  - dist-electron/pdf-combine-worker.js
npmRebuild: false
afterPack: ./scripts/afterPack.cjs
afterSign: ./scripts/afterSign.cjs

files:
  - dist-electron/
  - nuxt-output/
  - package.json
  - "!nuxt-output/**/*.map"
  - "!dist-electron/**/*.map"
  - "!**/node_modules/**/*.map"
  - "!**/node_modules/**/*.d.ts"
  - "!**/node_modules/**/*.d.mts"
  - "!**/node_modules/**/*.d.cts"
  - "!**/node_modules/**/*.md"
  - "!**/node_modules/**/README*"
  - "!.devkit/**/*"
  - "!.devkit"

extraResources:
  - from: resources/tesseract/tessdata
    to: tesseract/tessdata
    filter:
      - eng.traineddata
  - from: resources/icon.png
    to: icon.png

mac:
  icon: resources/icon.icns
  entitlementsInherit: build/entitlements.mac.plist
  target:
    - dmg
    - zip
  extraResources:
    - from: resources/tesseract/darwin-${arch}
      to: tesseract/darwin-${arch}
    - from: resources/poppler/darwin-${arch}
      to: poppler/darwin-${arch}
    - from: resources/qpdf/darwin-${arch}
      to: qpdf/darwin-${arch}
    - from: resources/djvulibre/darwin-${arch}
      to: djvulibre/darwin-${arch}

win:
  icon: resources/icon.ico
  artifactName: "${productName}-${version}-${arch}-setup.${ext}"
  target:
    - nsis
  extraResources:
    - from: resources/tesseract/win32-${arch}
      to: tesseract/win32-${arch}
    - from: resources/poppler/win32-${arch}
      to: poppler/win32-${arch}
    - from: resources/qpdf/win32-${arch}
      to: qpdf/win32-${arch}
    - from: resources/djvulibre/win32-${arch}
      to: djvulibre/win32-${arch}

linux:
  icon: resources/icon.png
  target:
    - AppImage
    - deb
  extraResources:
    - from: resources/tesseract/linux-${arch}
      to: tesseract/linux-${arch}
    - from: resources/poppler/linux-${arch}
      to: poppler/linux-${arch}
    - from: resources/qpdf/linux-${arch}
      to: qpdf/linux-${arch}
    - from: resources/djvulibre/linux-${arch}
      to: djvulibre/linux-${arch}

nsis:
  oneClick: false
  allowToChangeInstallationDirectory: true
  perMachine: false
  include: build/installer.nsh

fileAssociations:
  - ext: pdf
    mimeType: application/pdf
    role: Viewer
  - ext: djvu
    mimeType: image/vnd.djvu
    role: Viewer
  - ext: djv
    mimeType: image/vnd.djvu
    role: Viewer

dmg:
  background: resources/dmg-background.png
  iconSize: 128
  window:
    width: 600
    height: 540
  contents:
    - x: 170
      y: 185
    - x: 430
      y: 185
      type: link
      path: /Applications

publish: null
